<!DOCTYPE html>
<html>

<head>
    <title>Matter JavaScript</title>
</head>

<body>
    <script src="../p5.js"></script>
    <script src="../matter.js"></script>
    <script>
        var Engine = Matter.Engine;
        World = Matter.World;
        Bodies = Matter.Bodies;

        var engine;
        var boxy;
        var world;
        var box1 = [];
        var ground;

        function setup() {
            createCanvas(500, 500);
            engine = Engine.create();
            world = engine.world;
            Engine.run(engine);
            var option = {
                isStatic: true
            }
            ground = Bodies.rectangle(250, height, width, 50, option);
            World.add(world, ground);
        }

        function draw() {
            background(123);
            for (var i = 0; i < box1.length; i++) {
                box1[i].show();
            }
        }

        function mouseDragged() {
            box1.push(new Box(mouseX, mouseY, 30, 30));
        }

        function Box(x, y, w, h) {
            this.w = w;
            this.h = h;
            this.boxy = Bodies.rectangle(x, y, w, h);
            World.add(world, this.boxy);
            this.show = function() {
                var pos = this.boxy.position;
                var a = this.boxy.angle;
                push();
                translate(pos.x, pos.y);
                rotate(a);
                rectMode(CENTER);
                rect(0, 0, this.w, this.h);
                pop();
            }
        }
    </script>
</body>

</html>